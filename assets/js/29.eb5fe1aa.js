(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{175:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),n("p",[t._v("npm市场给前端带来了很大的变化，使前端也能想是java那样，从远程仓库拉取依赖的代码，从而极大的减小了项目的体积。\n开源的私有npm有很多，本次使用"),n("a",{attrs:{href:"https://github.com/verdaccio/verdaccio",target:"_blank",rel:"noopener noreferrer"}},[t._v("verdaccio"),n("OutboundLink")],1),t._v("搭建")]),t._v(" "),t._m(1),t._m(2),t._v(" "),n("p",[t._v("建议使用nrm管理地址源,方便好记。")]),t._v(" "),t._m(3),t._m(4),t._v(" "),n("p",[t._v("打开监听成功后的私有源配置（C:\\Users\\Administrator\\AppData\\Roaming\\verdaccio\\config.yaml）")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),n("hr"),t._v(" "),n("p",[t._v("package.json的配置"),n("a",{attrs:{href:"https://docs.npmjs.com/files/package.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),n("OutboundLink")],1),t._v("，针对目前主流的jsx或者vue文件的支持度并不支持，像是对模块化的js文件npm就可以很好的遍历他们之间对应的关系并发布，下面说几个比较常用且对发布有影响的配置。")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v("\n下面是一个files对象\n"),t._m(10),n("p",[t._v("此时，package.json和地址已经配置好了，接下来看如何上传私有包")]),t._v(" "),t._m(11),t._v(" "),n("p",[t._v("上述步骤都准备好了的话，一般我们就可以上传我们自己的包到私有npm啦，私有npm的好处很多，像是超快的网速啊，局域网内共享的代码，方便整个公司使用，可以发布一些业务组件或者区块等，也可以根据公司的UI规范来现实自己的UI框架等等，给产品的版本迭代和快速发布构建提供了很好的响应速度。")]),t._v(" "),t._m(12)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"搭建私有npm源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建私有npm源","aria-hidden":"true"}},[this._v("#")]),this._v(" 搭建私有npm源")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i verdaccio -g\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#全局安装，安装完成后即可通过命令启动了")]),t._v("\nverdaccio  --listen "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("host:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("port"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启动命令。配置对应的端口号 注：局域网监听请使用0.0.0.0:port，")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#localhost以及127.0.0.1无法监听到局域网IP")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  warn --- config file  - C:\\Users\\Administrator\\AppData\\Roaming\\verdaccio\\config.yaml ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#配置文件读取位置")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  warn --- http address - http://localhost:4873/ - verdaccio/4.1.0 //监听地址")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"npm对接私有源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm对接私有源","aria-hidden":"true"}},[this._v("#")]),this._v(" npm对接私有源")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -g nrm "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#全局安装nrm")]),t._v("\nnrm "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("给你的私有源起个名字"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("具体的地址"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("   \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#如 nrm add taobao https://registry.npm.taobao.org/")]),t._v("\nnrm "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看当前源列表")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   npm -------- https://registry.npmjs.org/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   yarn ------- https://registry.yarnpkg.com/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   cnpm ------- http://r.cnpmjs.org/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# * taobao ----- https://registry.npm.taobao.org/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   nj --------- https://registry.nodejitsu.com/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   npmMirror -- https://skimdb.npmjs.com/registry/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   edunpm ----- http://registry.enpmjs.org/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   sinopia ---- http://localhost:4873/")]),t._v("\nnrm use taobao "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#使用刚刚手动添加的淘宝源")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"配置私有源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置私有源","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置私有源")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("storage：包存储的文件路径(绝对和相对都可以)")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用前确保你的npm源已经修改为本地私有或者对应局域网的地址")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#添加用户")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" adduser "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输入你的用户和密码以及邮箱 ")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" publish "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 发布 你的包")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"package-json配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-json配置","aria-hidden":"true"}},[this._v("#")]),this._v(" package.json配置")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[t._v("name, version, description, main, author等通过字面意思即可理解，")]),t._v(" "),n("li",[t._v("version： 版本号（每次发布都需要大于之前的版本，否则无法发布")]),t._v(" "),n("li",[t._v("main：文件的主入口，js结尾的文件npm会自动遍历所有相关文件并发布")]),t._v(" "),n("li",[t._v("private： 不是付费用户发布必须填写false")]),t._v(" "),n("li",[t._v("author: 在npm市场的有效名称")]),t._v(" "),n("li",[t._v("scripts：提供快捷命令的入口，会被转换为其他命令执行")]),t._v(" "),n("li",[t._v("dependencies：平时我们通过--save安装的包以及对应的版本会被写入到该对象中")]),t._v(" "),n("li",[t._v("devDependencies：开发依赖，通过--dev安装的包会被写入到列表中")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticStyle:{color:"red"}},[s("b",[this._v("如果上传的文件代码是使用了webpack工具的.vue抑或是.jsx此类的第三方格式构建的项目或组件，建议在package.json中添加files对象来描述哪些文件该上传，以及添加正确dependencies包之间的关系依赖，否则npm无法获取文件之间的关系依赖，故无法上传完整的文件目录结构。")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"files"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"public/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tests/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_gitignore"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('".editorconfig"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('".eslintignore"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('".eslintrc"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"上传包到私有源地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传包到私有源地址","aria-hidden":"true"}},[this._v("#")]),this._v(" 上传包到私有源地址")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#先检查一遍我们是否使用了私有npm的地址")]),t._v("\nnrm "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看地址")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#如果没有记得使用nrm use xxx来替换掉当前的位置")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#如果确定了版本和代码，我们就可以根据当前的版本发布了，发布的版本一定要大于上次的对应的版本")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" adduser "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#使用前请先登录，输入用户名密码邮箱")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" publish "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 发布当前的版本")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#不出以外几秒不到就可以发布成功了，毕竟基于局域网，然后可以去对应的地址去查看自己上传的包了")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在其他项目中就可以使用npm i xxxx来安装我们自己的私有npm的包了，当然，使用前记得切换npm源")]),t._v("\n")])])])}],!1,null,null,null);s.default=e.exports}}]);